---
title: "Proyecto"
author: "Nelson Vera"
date: "1/21/2024"
output:
  md_document:
    variant: markdown_github
  html_document: default
---
### Descripcion del proyecto \n
El propósito de este proyecto es aplicar conocimientos de Estadística Descriptiva e Inferencial en un proyecto titulado 'Preprocesamiento, extracción de características y predicción de consumo de energía en tiempo real basada en Inteligencia Artificial en el borde o en la niebla'. Este trabajo implica la medición de diversas variables energéticas y de consumo en dispositivos Workstation, cuyas características son similares a las de dispositivos en un datacenter. El objetivo es predecir su consumo energético. Se han recopilado mediciones de estas variables a lo largo de los años. Un desafío identificado es la presencia de datos incompletos, los cuales se propone completar mediante técnicas de interpolación. Una vez resuelto este problema, se utilizarán métodos como la regresión lineal múltiple para predecir el consumo energético.

### Descripcion del Dataset \n
Los archivos 'junio2022_minuto_sin_interpolación.csv' y 'junio2022_minuto_con_interpolación.csv' contienen datos de mediciones clasificados en dos categorías: *variables energéticas* y *variables de rendimiento*. El archivo 'junio2022_minuto_sin_interpolación.csv' presenta la data original, con datos faltantes (546). Por otro lado, el archivo 'junio2022_minuto_con_interpolación.csv' contiene los mismos datos, pero después de haber aplicado la técnica de interpolación para completar los valores faltantes.  \n: 

*Variables Energéticas:* <br>
- **Voltaje**<br>
- **Corriente**<br>
- **Potencia**<br>
- **Frecuencia**<br>
- **Energía**<br>
- **Factor de Potencia (fp)**<br>
- **Temperatura (esp32_temp)**<br>

*Variables de Rendimiento:* <br>
- **CPU (workstation_cpu)**<br>
- **Potencia CPU (workstation_cpu_power)**<br>
- **Temperatura CPU (workstation_cpu_temp)**<br>
- **GPU**<br>
- **Potencia GPU**<br>
- **Temperatura GPU**<br>
- **RAM (workstation_ram)**<br>
- **Potencia de RAM (workstation_ram_power)**<br>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readODS)
library(ggplot2)
library(dplyr)
library(leaps)
library(car)
```
### Datos sin interpolacion
```{r}
#datos_sin_interpolacion <- read.csv("junio2022_07_minuto_sin_interpolacion.csv")
datos_sin_interpolacion <- read.csv("julio2022_minuto_sin_interpolacion.csv")
head(datos_sin_interpolacion)
summary(datos_sin_interpolacion)

```
### Datos con interpolacion
```{r}
#datos_con_interpolacion <- read.csv("junio2022_07_minuto_con_interpolacion.csv")
datos_con_interpolacion <- read.csv("julio2022_minuto_con_interpolacion.csv")
head(datos_con_interpolacion)
summary(datos_con_interpolacion)
```

### Variables Energeticas
### Voltaje 
```{r}
voltaje <- datos_con_interpolacion[['voltaje']]
```
**Ejemplos**
```{r echo=FALSE}
head(voltaje)
```
**Métricas de Voltaje**
```{r echo=FALSE}
mean_voltaje <- mean(voltaje, na.rm = TRUE)
median_voltaje <- median(voltaje, na.rm = TRUE)
sd_voltaje <- sd(voltaje, na.rm = TRUE)
cat('Media: ', mean_voltaje, '\n')
cat('Mediana: ', median_voltaje, '\n')
cat('Desviación Estándar: ', sd_voltaje, '\n')
hist(voltaje)
boxplot(voltaje)
```

### Corriente
```{r}
corriente <- datos_con_interpolacion[['corriente']]
```
**Ejemplos**
```{r echo=FALSE}
head(corriente)
```
**Métricas de corriente**
```{r echo=FALSE}
mean_corriente <- mean(corriente, na.rm = TRUE)
median_corriente <- median(corriente, na.rm = TRUE)
sd_corriente <- sd(corriente, na.rm = TRUE)
cat('Media: ', mean_corriente, '\n')
cat('Mediana: ', median_corriente, '\n')
cat('Desviación Estándar: ', sd_corriente, '\n')
hist(corriente)
boxplot(corriente)
```

### Potencia
```{r}
potencia <- datos_con_interpolacion[['potencia']]
```
**Ejemplos**
```{r echo=FALSE}
head(potencia)
```
**Métricas de potencia**
```{r echo=FALSE}
mean_potencia <- mean(potencia, na.rm = TRUE)
median_potencia <- median(potencia, na.rm = TRUE)
sd_potencia <- sd(potencia, na.rm = TRUE)
cat('Media: ', mean_potencia, '\n')
cat('Mediana: ', median_potencia, '\n')
cat('Desviación Estándar: ', sd_potencia, '\n')
hist(potencia)
boxplot(potencia)
```

### Frecuencia
```{r}
frecuencia <- datos_con_interpolacion[['frecuencia']]
```
**Ejemplos**
```{r echo=FALSE}
head(frecuencia)
```
**Métricas de frecuencia**
```{r echo=FALSE}
mean_frecuencia <- mean(frecuencia, na.rm = TRUE)
median_frecuencia <- median(frecuencia, na.rm = TRUE)
sd_frecuencia <- sd(frecuencia, na.rm = TRUE)
cat('Media: ', mean_frecuencia, '\n')
cat('Mediana: ', median_frecuencia, '\n')
cat('Desviación Estándar: ', sd_frecuencia, '\n')
hist(frecuencia)
boxplot(frecuencia)
```

### Energia
```{r}
energia <- datos_con_interpolacion[['energia']]
```
**Ejemplos**
```{r echo=FALSE}
head(energia)
mean_energia <- mean(energia, na.rm = TRUE)
median_energia <- median(energia, na.rm = TRUE)
sd_energia <- sd(energia, na.rm = TRUE)
cat('Métricas de energia:\n')
cat('Media: ', mean_energia, '\n')
cat('Mediana: ', median_energia, '\n')
cat('Desviación Estándar: ', sd_energia, '\n')
hist(energia)
boxplot(energia)
```

### Factor de Potencia
```{r}
fp <- datos_con_interpolacion[['fp']]
```
**Ejemplos**
```{r echo=FALSE}
head(fp)
```
**Métricas de fp**
```{r echo=FALSE}
mean_fp <- mean(fp, na.rm = TRUE)
median_fp <- median(fp, na.rm = TRUE)
sd_fp <- sd(fp, na.rm = TRUE)
cat('Media: ', mean_fp, '\n')
cat('Mediana: ', median_fp, '\n')
cat('Desviación Estándar: ', sd_fp, '\n')
hist(fp)
boxplot(fp)
```

### Temperatura ESP32 (Sensor)
```{r}
esp32_temp <- datos_con_interpolacion[['esp32_temp']]
```
**Ejemplos**
```{r echo=FALSE}
head(esp32_temp)
```
**Métricas de esp32_temp**
```{r echo=FALSE}
mean_esp32_temp <- mean(esp32_temp, na.rm = TRUE)
median_esp32_temp <- median(esp32_temp, na.rm = TRUE)
sd_esp32_temp <- sd(esp32_temp, na.rm = TRUE)
cat('Media: ', mean_esp32_temp, '\n')
cat('Mediana: ', median_esp32_temp, '\n')
cat('Desviación Estándar: ', sd_esp32_temp, '\n')
hist(esp32_temp)
boxplot(esp32_temp)
```

### Variables de Rendimiento
### Workstation CPU
```{r}
workstation_cpu <- datos_con_interpolacion[['workstation_cpu']]
```
**Ejemplos**
```{r echo=FALSE}
head(workstation_cpu)
```
**Métricas de workstation_cpu**
```{r echo=FALSE}
mean_workstation_cpu <- mean(workstation_cpu, na.rm = TRUE)
median_workstation_cpu <- median(workstation_cpu, na.rm = TRUE)
sd_workstation_cpu <- sd(workstation_cpu, na.rm = TRUE)
cat('Media: ', mean_workstation_cpu, '\n')
cat('Mediana: ', median_workstation_cpu, '\n')
cat('Desviación Estándar: ', sd_workstation_cpu, '\n')
hist(workstation_cpu)
boxplot(workstation_cpu)
```

### Potencia Workstation CPU
```{r}
workstation_cpu_power <- datos_con_interpolacion[['workstation_cpu_power']]
```
**Ejemplos**
```{r echo=FALSE}
head(workstation_cpu_power)
```
**Métricas de workstation_cpu_power**
```{r echo=FALSE}
mean_workstation_cpu_power <- mean(workstation_cpu_power, na.rm = TRUE)
median_workstation_cpu_power <- median(workstation_cpu_power, na.rm = TRUE)
sd_workstation_cpu_power <- sd(workstation_cpu_power, na.rm = TRUE)
cat('Media: ', mean_workstation_cpu_power, '\n')
cat('Mediana: ', median_workstation_cpu_power, '\n')
cat('Desviación Estándar: ', sd_workstation_cpu_power, '\n')
hist(workstation_cpu_power)
boxplot(workstation_cpu_power)
```

### Temperatura Workstation CPU 
```{r}
workstation_cpu_temp <- datos_con_interpolacion[['workstation_cpu_temp']]
```
**Ejemplos**
```{r echo=FALSE}
head(workstation_cpu_temp)
```
**Métricas de workstation_cpu_temp**
```{r echo=FALSE}
mean_workstation_cpu_temp <- mean(workstation_cpu_temp, na.rm = TRUE)
median_workstation_cpu_temp <- median(workstation_cpu_temp, na.rm = TRUE)
sd_workstation_cpu_temp <- sd(workstation_cpu_temp, na.rm = TRUE)
cat('Media: ', mean_workstation_cpu_temp, '\n')
cat('Mediana: ', median_workstation_cpu_temp, '\n')
cat('Desviación Estándar: ', sd_workstation_cpu_temp, '\n')
hist(workstation_cpu_temp)
boxplot(workstation_cpu_temp)
```

### Workstation GPU 
```{r}
workstation_gpu <- datos_con_interpolacion[['workstation_gpu']]
```
**Ejemplos**
```{r echo=FALSE}
head(workstation_gpu)
```
**Métricas de workstation_gpu**
```{r echo=FALSE}
mean_workstation_gpu <- mean(workstation_gpu, na.rm = TRUE)
median_workstation_gpu <- median(workstation_gpu, na.rm = TRUE)
sd_workstation_gpu <- sd(workstation_gpu, na.rm = TRUE)
cat('Media: ', mean_workstation_gpu, '\n')
cat('Mediana: ', median_workstation_gpu, '\n')
cat('Desviación Estándar: ', sd_workstation_gpu, '\n')
hist(workstation_gpu)
boxplot(workstation_gpu)
```

### Potencia Workstation GPU
```{r}
workstation_gpu_power <- datos_con_interpolacion[['workstation_gpu_power']]
```
**Ejemplos**
```{r echo=FALSE}
head(workstation_gpu_power)
```
**Métricas de workstation_gpu_power**
```{r echo=FALSE}
mean_workstation_gpu_power <- mean(workstation_gpu_power, na.rm = TRUE)
median_workstation_gpu_power <- median(workstation_gpu_power, na.rm = TRUE)
sd_workstation_gpu_power <- sd(workstation_gpu_power, na.rm = TRUE)
cat('Media: ', mean_workstation_gpu_power, '\n')
cat('Mediana: ', median_workstation_gpu_power, '\n')
cat('Desviación Estándar: ', sd_workstation_gpu_power, '\n')
hist(workstation_gpu_power)
boxplot(workstation_gpu_power)
```

### Temperatura Workstation GPU
```{r}
workstation_gpu_temp <- datos_con_interpolacion[['workstation_gpu_temp']]
```
**Ejemplos**
```{r echo=FALSE}
head(workstation_gpu_temp)
```
**Métricas de workstation_gpu_temp**
```{r echo=FALSE}
mean_workstation_gpu_temp <- mean(workstation_gpu_temp, na.rm = TRUE)
median_workstation_gpu_temp <- median(workstation_gpu_temp, na.rm = TRUE)
sd_workstation_gpu_temp <- sd(workstation_gpu_temp, na.rm = TRUE)
cat('Media: ', mean_workstation_gpu_temp, '\n')
cat('Mediana: ', median_workstation_gpu_temp, '\n')
cat('Desviación Estándar: ', sd_workstation_gpu_temp, '\n')
hist(workstation_gpu_temp)
boxplot(workstation_gpu_temp)
```

### Workstation RAM
```{r}
workstation_ram <- datos_con_interpolacion[['workstation_ram']]
```
**Ejemplos**
```{r echo=FALSE}
head(workstation_ram)
```
**Métricas de workstation_ram**
```{r echo=FALSE}
mean_workstation_ram <- mean(workstation_ram, na.rm = TRUE)
median_workstation_ram <- median(workstation_ram, na.rm = TRUE)
sd_workstation_ram <- sd(workstation_ram, na.rm = TRUE)
cat('Media: ', mean_workstation_ram, '\n')
cat('Mediana: ', median_workstation_ram, '\n')
cat('Desviación Estándar: ', sd_workstation_ram, '\n')
hist(workstation_ram)
boxplot(workstation_ram)
```

### Potencia Workstation RAM
```{r}
workstation_ram_power <- datos_con_interpolacion[['workstation_ram_power']]
```
**Ejemplos**
```{r echo=FALSE}
head(workstation_ram_power)
```
**Métricas de workstation_ram_power**
```{r echo=FALSE}
mean_workstation_ram_power <- mean(workstation_ram_power, na.rm = TRUE)
median_workstation_ram_power <- median(workstation_ram_power, na.rm = TRUE)
sd_workstation_ram_power <- sd(workstation_ram_power, na.rm = TRUE)
cat('Media: ', mean_workstation_ram_power, '\n')
cat('Mediana: ', median_workstation_ram_power, '\n')
cat('Desviación Estándar: ', sd_workstation_ram_power, '\n')
hist(workstation_ram_power)
boxplot(workstation_ram_power)
```

El enfoque principal de nuestro análisis será la variable 'energía', debido a su relevancia para el proyecto. Esta variable es crucial ya que sobre ella se realizarán cálculos de predicción. Con el fin de evaluar el impacto de la interpolación, compararemos las medias y varianzas de los datos antes y después de aplicar esta técnica.

### Comparacion de Medias
Es esencial asegurar que la interpolación no haya sesgado significativamente la media, ya que cambios notables podrían llevar a interpretaciones erróneas de las tendencias en la serie de tiempo, afectando las predicciones sobre el consumo.
### Prueba de bondad de ajuste
```{r}
energia_sin_interpolacion <- na.omit(datos_sin_interpolacion[['energia']])
energia_con_interpolacion <- na.omit(datos_con_interpolacion[['energia']])

ks.test(energia_sin_interpolacion, "pnorm", mean=mean(energia_sin_interpolacion), sd=sd(energia_sin_interpolacion))
ks.test(energia_con_interpolacion, "pnorm", mean=mean(energia_con_interpolacion), sd=sd(energia_con_interpolacion))

```

### Prueba de significancia sobre la Media

- *Hipótesis Nula:* La media de la variable 'energía' en la serie de tiempo no experimenta un cambio significativo después de aplicar la interpolación.

- *Hipótesis Alternativa:* La media de la variable 'energía' cambia significativamente después de aplicar la interpolación.

```{r}
t_test_result <- t.test(energia_sin_interpolacion, energia_con_interpolacion)
t_test_result
```
*No hay evidencia suficiente para afirmar que la media de la variable 'energía' cambia significativamente después de aplicar la interpolación. Las medias de ambas muestras son estadísticamente similares.*

### Comparacion de Varianzas
La alteración significativa de la varianza por la interpolación puede distorsionar la volatilidad de la serie de tiempo, impactando directamente en la precisión de las predicciones de consumo energético.

### Prueba de significancia sobre la Varianza

- *Hipótesis Nula:* La varianza de la serie de tiempo no cambia significativamente después de aplicar la interpolación.

- *Hipótesis Alternativa:* La varianza de la serie de tiempo cambia significativamente después de la interpolación.

```{r}
f_test_result <- var.test(energia_sin_interpolacion, energia_con_interpolacion)
f_test_result
```
*Hay evidencia estadística significativa de que la varianza de la serie de tiempo de 'energía' cambia después de aplicar la interpolación.*

### Regresion
### Mixed Selection
```{r}

```
### Matriz de Correlacion
```{r echo=FALSE}
library(ggplot2)
library(corrplot)
variables_interes <- datos_con_interpolacion[, c("workstation_ram", "workstation_ram_power",
                                                 "workstation_cpu", "workstation_cpu_power",
                                                 "workstation_cpu_temp", "workstation_gpu",
                                                 "workstation_gpu_power", "workstation_gpu_temp",
                                                 "voltaje", "corriente", "potencia",
                                                 "frecuencia", "energia", "fp", "esp32_temp")]

matriz_correlacion <- cor(variables_interes, use = "complete.obs")
corrplot(matriz_correlacion, method = "circle")
```
### Regresion Lineal Multiple